{"ast":null,"code":"var _jsxFileName = \"/home/dbws/projects/resume-maker/resume-react-ui/src/components/pages/MyAccount.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, Fragment } from 'react';\nimport { GetUserById, UpdateUserById, changePassword, changeEmail, deleteMyAccount } from \"../../actions/user\";\nimport { connect } from \"react-redux\";\nimport { getCurrentLoggedInUserId, setLocalStorageItem, getLocalStorageItem, getUserData } from \"../../utils/globals\";\nimport EditUserDetail from '../widgets/EditUserDetail';\nimport ChangePassword from \"../widgets/changePassword\";\nimport ChangeEmail from \"../widgets/changeEmail\";\nimport { sendResetLink } from \".././../actions/auth\";\nimport UserChoiceNotif from \"../widgets/UserChoiceNotif\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MyAccount(props) {\n  _s();\n\n  const [currentUserDetail, setCurrentUserDetail] = useState({});\n  const [showEditUser, setShowEditUser] = useState(false);\n  const [showChangePassword, setShowChangePassword] = useState(false);\n  const [showChangeEmail, setShowChangeEmail] = useState(false);\n  useEffect(() => {\n    if (props.userDetail && props.userDetail && props.userDetail.id) {\n      setCurrentUserDetail(props.userDetail);\n      let users = getLocalStorageItem('userDetail');\n      users.user = props.userDetail;\n      console.log(users);\n      setLocalStorageItem('userDetail', users);\n    }\n  }, [props.userDetail]);\n  useEffect(() => {\n    if (!getCurrentLoggedInUserId()) {\n      alert(\"No token\");\n    } else {\n      props.GetUserById(getCurrentLoggedInUserId());\n    }\n  }, [props.GetUserById]);\n\n  const handleUserUpdate = fieldobj => {\n    props.UpdateUserById(getCurrentLoggedInUserId(), fieldobj);\n    setShowEditUser(false);\n  };\n\n  const sendResetPasswordLink = () => {\n    props.sendResetLink({\n      email: getUserData('email')\n    });\n  };\n\n  const changePassword = (old_password, new_password) => {\n    props.changePassword({\n      new_password: new_password,\n      password: old_password\n    });\n    setShowChangePassword(false);\n  };\n\n  const changeEmail = (old_password, email) => {\n    props.changeEmail({\n      password: old_password,\n      email: email\n    });\n    setShowChangeEmail(false);\n  };\n\n  const downloadData = () => {\n    return \"text/json;charset=utf-8,\" + encodeURIComponent(JSON.stringify(getUserData()));\n  };\n\n  const updateNotification = fieldobj => {\n    props.UpdateUserById(getCurrentLoggedInUserId(), fieldobj);\n  };\n\n  const deleteMyAct = () => {\n    if (typeof window !== 'undefined') {\n      if (window.confirm(\"You really want to delete your account it will delete all your data\")) {\n        console.log(\"fdvdjfvdfkj jk\");\n        props.deleteMyAccount(getCurrentLoggedInUserId());\n      }\n\n      ;\n    }\n  };\n\n  if (props.loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }, this);\n  }\n\n  console.log(currentUserDetail.notification);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"My account\", /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Section 1 : \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), currentUserDetail && currentUserDetail.subscription ? currentUserDetail.subscription.type == 'free' ? 'Free (upgrade to pro)' : currentUserDetail.subscription.type : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Section 2 Account detail :\", /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => setShowEditUser(true),\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"email = \", currentUserDetail.email, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"first_name= \", currentUserDetail.first_name, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"last_name=\", currentUserDetail.last_name, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), currentUserDetail.dob ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"dob = \", new Date(currentUserDetail.dob).getMonth() + 1 + \"/\" + +new Date(currentUserDetail.dob).getDate() + \"/\" + new Date(currentUserDetail.dob).getFullYear()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 42\n      }, this) : \"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Section 3 Password changes and email changes : \", /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => sendResetPasswordLink(),\n        children: \"click here to change password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 65\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => setShowChangeEmail(true),\n        children: \"click here to change Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"section 4 : Update notification preferences : \", /*#__PURE__*/_jsxDEV(UserChoiceNotif, {\n        submitCb: updateNotification,\n        notifications: currentUserDetail.notification\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 63\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Section 5 Download my data : \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"data:\" + downloadData(),\n        download: \"data.json\",\n        children: \"Download Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 47\n      }, this), \"  \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Section 6 Delete my account : \", /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => deleteMyAct(),\n        children: \"Click here to delete your account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 48\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), showEditUser && /*#__PURE__*/_jsxDEV(EditUserDetail, {\n      handleUserUpdate: handleUserUpdate,\n      closeCb: setShowEditUser,\n      email: currentUserDetail.email,\n      first_name: currentUserDetail.first_name,\n      last_name: currentUserDetail.last_name,\n      dob: currentUserDetail.dob\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 31\n    }, this), showChangePassword && /*#__PURE__*/_jsxDEV(ChangePassword, {\n      closeCb: setShowChangePassword,\n      SubmitCb: changePassword\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 37\n    }, this), showChangeEmail && /*#__PURE__*/_jsxDEV(ChangeEmail, {\n      closeCb: setShowChangeEmail,\n      SubmitCb: changeEmail\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 34\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MyAccount, \"DPSHSxpgxch2gFcdxXcoawQ9kKM=\");\n\n_c = MyAccount;\n\nconst mapStateToProps = state => ({\n  userDetail: state.user.userDetail,\n  loading: state.user.user_detail_loading\n});\n\nconst mapDispatchToProps = {\n  GetUserById,\n  UpdateUserById,\n  changePassword,\n  deleteMyAccount,\n  sendResetLink,\n  changeEmail\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(MyAccount);\n\nvar _c;\n\n$RefreshReg$(_c, \"MyAccount\");","map":{"version":3,"sources":["/home/dbws/projects/resume-maker/resume-react-ui/src/components/pages/MyAccount.js"],"names":["React","useEffect","useState","Fragment","GetUserById","UpdateUserById","changePassword","changeEmail","deleteMyAccount","connect","getCurrentLoggedInUserId","setLocalStorageItem","getLocalStorageItem","getUserData","EditUserDetail","ChangePassword","ChangeEmail","sendResetLink","UserChoiceNotif","MyAccount","props","currentUserDetail","setCurrentUserDetail","showEditUser","setShowEditUser","showChangePassword","setShowChangePassword","showChangeEmail","setShowChangeEmail","userDetail","id","users","user","console","log","alert","handleUserUpdate","fieldobj","sendResetPasswordLink","email","old_password","new_password","password","downloadData","encodeURIComponent","JSON","stringify","updateNotification","deleteMyAct","window","confirm","loading","notification","subscription","type","first_name","last_name","dob","Date","getMonth","getDate","getFullYear","mapStateToProps","state","user_detail_loading","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React , { useEffect, useState , Fragment } from 'react';\nimport {GetUserById , UpdateUserById, changePassword , changeEmail, deleteMyAccount} from \"../../actions/user\";\nimport { connect } from \"react-redux\";\nimport { getCurrentLoggedInUserId , setLocalStorageItem , getLocalStorageItem , getUserData} from \"../../utils/globals\";\nimport  EditUserDetail from '../widgets/EditUserDetail';\nimport ChangePassword from \"../widgets/changePassword\";\nimport ChangeEmail from \"../widgets/changeEmail\";\nimport { sendResetLink } from \".././../actions/auth\"\nimport UserChoiceNotif from \"../widgets/UserChoiceNotif\"\nfunction MyAccount(props) {\n    const [currentUserDetail , setCurrentUserDetail] = useState({});\n    const [showEditUser , setShowEditUser ] = useState(false);\n    const [showChangePassword , setShowChangePassword ] = useState(false);\n    const [showChangeEmail , setShowChangeEmail ] = useState(false);\n\n\n    useEffect( () => {\n        if(props.userDetail && props.userDetail && props.userDetail.id ){\n            setCurrentUserDetail(props.userDetail);\n            let users = getLocalStorageItem('userDetail');\n            users.user = props.userDetail;\n            console.log(users)\n            setLocalStorageItem('userDetail' , users);\n        }    }, [props.userDetail] );\n\n    useEffect(() => {\n        if(!getCurrentLoggedInUserId()){\n            alert(\"No token\")\n        } else {\n            props.GetUserById(getCurrentLoggedInUserId());\n        }\n    } , [props.GetUserById])\n    \n    const handleUserUpdate = (fieldobj) => {\n        props.UpdateUserById(getCurrentLoggedInUserId() , fieldobj);\n        setShowEditUser(false);\n    }\n    const sendResetPasswordLink = () => {\n        props.sendResetLink({email : getUserData('email')});\n    }\n\n    const changePassword = (old_password , new_password) => {\n        props.changePassword({ new_password : new_password , password : old_password});\n        setShowChangePassword(false);\n    }\n\n    const changeEmail = (old_password , email) => {\n        props.changeEmail({ password : old_password , email : email});\n        setShowChangeEmail(false);\n    }\n\n    const downloadData = () => {\n        return\"text/json;charset=utf-8,\" + encodeURIComponent(JSON.stringify(getUserData()));\n    }\n\n    const updateNotification = (fieldobj) => {\n        props.UpdateUserById(getCurrentLoggedInUserId() , fieldobj);\n        \n    }\n\n    const deleteMyAct = () => {\n        if(typeof window !== 'undefined'){\n            if(window.confirm(\"You really want to delete your account it will delete all your data\")){\n                console.log(\"fdvdjfvdfkj jk\");\n              \n                props.deleteMyAccount(getCurrentLoggedInUserId())\n            };\n        }\n    }\n    if(props.loading) {\n        return (<div>\n            Loading\n        </div>)\n    }\n    console.log(currentUserDetail.notification)\n    return (\n        <div>My account\n            <div>Section 1 : </div> \n            { currentUserDetail && currentUserDetail.subscription ? currentUserDetail.subscription.type == 'free' ? 'Free (upgrade to pro)' : currentUserDetail.subscription.type : \"\" }\n            <div>Section 2 Account detail : \n                <span onClick={() => setShowEditUser(true)}>Edit</span>\n                <p>email = {currentUserDetail.email} </p>\n                <p>first_name= {currentUserDetail.first_name} </p>\n                <p>last_name={currentUserDetail.last_name} </p>\n                {currentUserDetail.dob ? <p>dob = {new Date(currentUserDetail.dob).getMonth() + 1 + \"/\" + + new Date(currentUserDetail.dob).getDate() + \"/\" + new Date(currentUserDetail.dob).getFullYear()}</p> : \"\" }</div> \n            <div>Section 3 Password changes and email changes : <span onClick={() => sendResetPasswordLink()}>click here to change password</span>\n            <span onClick={() => setShowChangeEmail(true)}>click here to change Email</span>\n            </div> \n            <div>\n                section 4 : Update notification preferences : <UserChoiceNotif submitCb={updateNotification} notifications = { currentUserDetail.notification } />\n            </div>\n            <div>Section 5 Download my data : <a href={\"data:\"+downloadData()} download=\"data.json\">Download Data</a>  </div> \n            <div>Section 6 Delete my account : <span onClick={() => deleteMyAct()}>Click here to delete your account</span></div> \n            { showEditUser && <EditUserDetail handleUserUpdate = { handleUserUpdate } closeCb={setShowEditUser} email = {currentUserDetail.email} first_name= {currentUserDetail.first_name} last_name={currentUserDetail.last_name} dob = {currentUserDetail.dob}  />}\n            { showChangePassword && <ChangePassword closeCb={setShowChangePassword} SubmitCb={changePassword} />}\n            { showChangeEmail && <ChangeEmail closeCb={setShowChangeEmail} SubmitCb={changeEmail} />}\n        </div>        \n    )\n}\n\n\nconst mapStateToProps = ( state ) => ( {\n    userDetail: state.user.userDetail,\n    loading : state.user.user_detail_loading\n} );\n\nconst mapDispatchToProps = {\n    GetUserById,\n    UpdateUserById,\n    changePassword,\n    deleteMyAccount,\n    sendResetLink,\n    changeEmail\n};\n\nexport default connect( mapStateToProps, mapDispatchToProps )( MyAccount );\n"]},"metadata":{},"sourceType":"module"}